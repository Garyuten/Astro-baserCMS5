---
import Layout from "@layouts/Layout.astro";
import { myContents } from "@lib/api";
import { myUtils } from '@lib/utils.ts';
import PostItem from '@components/PostItem.astro';

import fetch from "node-fetch";
import dotenv from 'dotenv';

dotenv.config();

const basePath = myUtils.basePath;
const formatDate = myUtils.formatDate

// å›ºå®šãƒšãƒ¼ã‚¸ä¸€è¦§å–å¾—
const res = await fetch(`${import.meta.env.VITE_API_BASE_URL}/baser-core/contents.json`);
const json: Record<string, any> = await res.json() as Record<string, any>;
// console.log(json);
const contents = json.contents;

// ãƒ–ãƒ­ã‚° NEWS å–å¾—
const resNews = await fetch(
  `${import.meta.env.VITE_API_BASE_URL}/bc-blog/blog_posts.json?blog_content_id=1`
);
const jsonNews: Record<string, any> = await resNews.json() as Record<string, any>;
// console.log(jsonNews);
const blogPostsNews = jsonNews.blogPosts;

// ãƒ–ãƒ­ã‚° NEWSã‚«ãƒ†ã‚´ãƒªãƒ¼ å–å¾—
const resCategory = await fetch(
  `${import.meta.env.VITE_API_BASE_URL}/bc-blog/blog_categories.json?blog_content_id=1`
);
const jsonCategory: Record<string, any> = await resCategory.json() as Record<string, any>;
// console.log(jsonCategory);
// idã‚’ã‚­ãƒ¼ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
let blogCategories: { [key: string]: any } = [];
jsonCategory.blogCategories.forEach((item: any) => {
  blogCategories[item.id] = { ...item, children: [] };
});

// ãƒ–ãƒ­ã‚° ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ å–å¾—
const resRelease = await fetch(
  `${import.meta.env.VITE_API_BASE_URL}/bc-blog/blog_posts.json?blog_content_id=2`);
const jsonRelease: Record<string, any> = await resRelease.json() as Record<string, any>;
// console.log(jsonRelease);
const blogPostsRelease = jsonRelease.blogPosts;


---

<Layout title="Welcome to Astro." contentId={0}>
  <h1>Astro + baserCMS5 ğŸš€</h1>

  <div class="bs-info">
    <h2 class="bs-info__head">NEWS</h2>

    <ul class="bs-top-post">
      {
        blogPostsNews &&
          blogPostsNews.map((post: any) => (
            <PostItem blogPath="/news" blogCategories={blogCategories} post={post} />
          ))
      }
    </ul>
    <div class="bs-top-post-to-list"><a href="/news/">VIEW ALL</a></div>
  </div>

  {
    blogPostsRelease &&
      blogPostsRelease.map((post: any) => (
          <PostItem blogPath="/release" blogCategories={blogCategories} post={post} />
      ))
  }

  <h2>baserCMSã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒ¼ãƒ</h2>

  <p>
    ã“ã‚Œã¯ã€baserCMSã®ã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒ¼ãƒã§ã™ã€‚<br />
     ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ã“ã®éƒ¨åˆ†ã¯ã€å›ºå®šãƒšãƒ¼ã‚¸ã§ä½œã‚‰ã‚Œã¦ãŠã‚Šã€NEWS ã¨
    baserCMSæœ€æ–°æƒ…å ±ã®éƒ¨åˆ†ã¯ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚<br />
     å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€/pages/index.astro ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚
  </p>

  <h3>ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ã¤ã„ã¦</h3>

  <p>
    ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ã€ç®¡ç†ç”»é¢ã® [ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†]
    ã®ãƒ„ãƒªãƒ¼æ§‹é€ ã¨é€£å‹•ã—ã¦ã„ã¾ã™ã€‚ãƒ„ãƒªãƒ¼æ§‹é€ ä¸Šã«ãŠã„ã¦ãƒ‰ãƒ©ãƒƒã‚¯ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ä¸¦ã³æ›¿ãˆã‚‹ã“ã¨ãŒã§ãã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«è¡¨ç¤ºã—ãŸããªã„å ´åˆã¯ã€å¯¾è±¡ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç·¨é›†ç”»é¢ã‚ˆã‚Šã€[ã‚ªãƒ—ã‚·ãƒ§ãƒ³]
    ã‚’é–‹ãã€[å…¬é–‹ãƒšãƒ¼ã‚¸ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚ˆã‚Šé™¤å¤–ã™ã‚‹] ã‚’é¸æŠã—ä¿å­˜ã—ã¦ãã ã•ã„ã€‚
  </p>

  <p>
    ã¾ãŸã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼éƒ¨åˆ†ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€/Elements/header.php
    ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
  </p>

  <h3>ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã¤ã„ã¦</h3>

  <p>
    ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚¨ãƒªã‚¢æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚ç®¡ç†ç”»é¢ã®
    [è¨­å®š] &rarr; [ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£] &rarr; [ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚¨ãƒªã‚¢]
    ã‚ˆã‚Šã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã§ã™ã€‚ãƒ–ãƒ­ã‚°ã§ã¯ã€Œãƒ–ãƒ­ã‚°ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒã€ãã‚Œä»¥å¤–ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã§ã¯ã€ã€Œæ¨™æº–ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
  </p>

  <p>
    ã‚µã‚¤ãƒˆåŸºæœ¬è¨­å®šã¯ã€å„ãƒ–ãƒ­ã‚°ã® [è¨­å®š]
    ã‚ˆã‚Šåˆ©ç”¨ã™ã‚‹ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚¨ãƒªã‚¢ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
  </p>

  <p>
    ã¾ãŸã€ã‚µã‚¤ãƒ‰ãƒãƒ¼éƒ¨åˆ†ã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€/Elements/widget_area.php
    ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
  </p>

  <h3>åˆæœŸãƒ‡ãƒ¼ã‚¿ã«ã¤ã„ã¦</h3>

  <p>
    ã“ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ†ãƒ¼ãƒã¯ï¼’ã¤ã®åˆæœŸãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚ç¾åœ¨åˆ©ç”¨ã—ã¦ã„ã‚‹ã‚‚ã®ã¯ã€Œdefaultã€ã§ã‚µãƒ³ãƒ—ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã£ã¦ã„ã‚‹ã‚‚ã®ã«ãªã‚Šã¾ã™ã€‚
  </p>

  <p>
    ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã£ã¦ã„ãªã„ã‚‚ã®ã‚’åˆ©ç”¨ã—ãŸã„å ´åˆã¯ã€ãƒ†ãƒ¼ãƒç®¡ç†ã‚ˆã‚Šã€Œemptyã€ã‚’é¸æŠã—ã€ŒåˆæœŸãƒ‡ãƒ¼ã‚¿èª­è¾¼ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚
  </p>
</Layout>

<style>
  main {
    margin: auto;
    padding: 1rem;
    width: 800px;
    max-width: calc(100% - 2rem);
    color: #333;
    font-size: 20px;
    line-height: 1.6;
  }
  .astro-a {
    position: absolute;
    top: -32px;
    left: 50%;
    transform: translatex(-50%);
    width: 220px;
    height: auto;
    z-index: -1;
  }
  h1 {
    font-size: 4rem;
    font-weight: 700;
    line-height: 1;
    text-align: center;
    margin-bottom: 1em;
  }
  .text-gradient {
    background-image: var(--accent-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 400%;
    background-position: 0%;
  }
  .instructions {
    margin-bottom: 2rem;
    border: 1px solid rgba(var(--accent-light), 25%);
    background: linear-gradient(
      rgba(var(--accent-dark), 66%),
      rgba(var(--accent-dark), 33%)
    );
    padding: 1.5rem;
    border-radius: 8px;
  }
  .instructions code {
    font-size: 0.8em;
    font-weight: bold;
    background: rgba(var(--accent-light), 12%);
    color: rgb(var(--accent-light));
    border-radius: 4px;
    padding: 0.3em 0.4em;
  }
  .instructions strong {
    color: rgb(var(--accent-light));
  }
  .link-card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(24ch, 1fr));
    gap: 2rem;
    padding: 0;
  }
</style>
